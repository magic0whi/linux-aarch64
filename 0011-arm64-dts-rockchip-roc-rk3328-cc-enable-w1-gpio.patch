From 19213710dd78bf25207bec29b48390a27a5c42a1 Mon Sep 17 00:00:00 2001
From: magic0whi <lollipop.studio.cn@gmail.com>
Date: Tue, 14 Apr 2020 07:48:41 +0000
Subject: [PATCH] arm64: dts: rockchip: roc-rk3328-cc: enable w1-gpio

---
 arch/arm64/boot/dts/rockchip/rk3328-roc-cc.dts | 13 +++++++++++++
 1 file changed, 13 insertions(+)

diff --git a/arch/arm64/boot/dts/rockchip/rk3328-roc-cc.dts b/arch/arm64/boot/dts/rockchip/rk3328-roc-cc.dts
index a52ef4abd..78addb146 100644
--- a/arch/arm64/boot/dts/rockchip/rk3328-roc-cc.dts
+++ b/arch/arm64/boot/dts/rockchip/rk3328-roc-cc.dts
@@ -146,6 +146,14 @@ user {
 			mode = <0x05>;
 		};
 	};
+
+	w1: onewire@0 {
+		compatible = "w1-gpio";
+		pinctrl-names = "default";
+		pinctrl-0 = <&w1_gpio_pins>;
+		gpios = <&gpio2 20 0>;
+		status = "okay";
+	};
 };
 
 &codec {
@@ -355,6 +363,11 @@ usb20_host_drv: usb20-host-drv {
 			rockchip,pins = <1 RK_PD2 RK_FUNC_GPIO &pcfg_pull_none>;
 		};
 	};
+	gpio2 {
+		w1_gpio_pins: w1_gpio_pins@0 {
+			rockchip,pins = <RK_GPIO2 RK_PC4 RK_FUNC_GPIO &pcfg_pull_up>;
+		};
+	};
 };
 
 &sdmmc {
-- 
2.26.0

