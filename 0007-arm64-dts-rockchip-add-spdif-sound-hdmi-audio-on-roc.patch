From 4c1eb87719267438a0c47e8095aa688c9f2a9ca4 Mon Sep 17 00:00:00 2001
From: magic0whi <lollipop.studio.cn@gmail.com>
Date: Wed, 26 Jun 2019 12:26:19 +0800
Subject: [PATCH 07/17] arm64: dts: rockchip: add spdif sound & hdmi audio on
 roc-rk3328-cc

---
 .../arm64/boot/dts/rockchip/rk3328-roc-cc.dts | 61 +++++++++++++++++++
 1 file changed, 61 insertions(+)

diff --git a/arch/arm64/boot/dts/rockchip/rk3328-roc-cc.dts b/arch/arm64/boot/dts/rockchip/rk3328-roc-cc.dts
index ba0e83d36..71611a8ab 100644
--- a/arch/arm64/boot/dts/rockchip/rk3328-roc-cc.dts
+++ b/arch/arm64/boot/dts/rockchip/rk3328-roc-cc.dts
@@ -83,6 +83,50 @@ vcc_phy: vcc-phy-regulator {
 		regulator-boot-on;
 	};
 
+       sound {
+               compatible = "simple-audio-card";
+               simple-audio-card,format = "i2s";
+               simple-audio-card,mclk-fs = <256>;
+               simple-audio-card,name = "rockchip,rk3328";
+               simple-audio-card,cpu {
+                       sound-dai = <&i2s1>;
+               };
+               simple-audio-card,codec {
+                       sound-dai = <&codec>;
+               };
+       };
+
+       hdmi-sound {
+               compatible = "simple-audio-card";
+               simple-audio-card,format = "i2s";
+               simple-audio-card,mclk-fs = <128>;
+               simple-audio-card,name = "rockchip,hdmi";
+               simple-audio-card,cpu {
+                       sound-dai = <&i2s0>;
+               };
+               simple-audio-card,codec {
+                       sound-dai = <&hdmi>;
+               };
+       };
+
+       spdif-sound {
+               status = "disabled";
+               compatible = "simple-audio-card";
+               simple-audio-card,name = "rockchip,spdif";
+               simple-audio-card,cpu {
+                       sound-dai = <&spdif>;
+               };
+               simple-audio-card,codec {
+                       sound-dai = <&spdif_out>;
+               };
+       };
+
+       spdif_out: spdif-out {
+         status = "disabled";
+               compatible = "linux,spdif-dit";
+               #sound-dai-cells = <0>;
+       };
+
 	leds {
 		compatible = "gpio-leds";
 
@@ -104,6 +148,10 @@ user {
 	};
 };
 
+&codec {
+	status = "okay";
+};
+
 &cpu0 {
 	cpu-supply = <&vdd_arm>;
 };
@@ -270,6 +318,15 @@ regulator-state-mem {
 	};
 };
 
+&i2s0 {
+	rockchip,bclk-fs = <128>;
+	status = "okay";
+};
+
+&i2s1 {
+	status = "okay";
+};
+
 &io_domains {
 	status = "okay";
 
@@ -313,6 +370,10 @@ &sdmmc {
 	status = "okay";
 };
 
+&spdif {
+	status = "disabled";
+};
+
 &tsadc {
 	status = "okay";
 };
-- 
2.27.0

